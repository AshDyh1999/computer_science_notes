## 1. 生产者和消费者的shmfifo解决
1. 文档
    1. [介绍文档](https://blog.csdn.net/nk_test/article/details/50218131)
    2. [原理图](data:image/png;base64,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),或者搜索shmfifo图片也能找到
2. 思想
    1. 存在1个指针宏观控制共享内存
    2. 共享内存:1个首部结构+若干个块
    3. 1个数据的大小=块大小
    4. 使用`char*`标记位置
    5. 写入/读取使用memcpy
    6. 环形移动
```
# 先生产5个学生,但由于共享内存只能存放3个学生,所以就停止在第3个学生
./produce 
#----------------------------------------------------------------------------------
# put name=orris age=20
# put name=orris age=21
# put name=orris age=22
#----------------------------------------------------------------------------------

# 消费5个学生,由于消费的同时空出来的位置多了出来,所以前面的生产者停止堵塞,继续生产=>消费5个学生
./consume 
#----------------------------------------------------------------------------------
# name=orris age=20
# name=orris age=21
# name=orris age=22
# name=orris age=23
# name=orris age=24
#----------------------------------------------------------------------------------

# 由于消费者出现,所以就能继续生产剩下的2个学生了
./produce 
#----------------------------------------------------------------------------------
# put name=orris age=20
# put name=orris age=21
# put name=orris age=22
# put name=orris age=23
# put name=orris age=24
#----------------------------------------------------------------------------------

```
